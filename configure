#! /bin/bash

# copy the relevant dynamic libraries to ${R_PACKAGE_DIR}/libs
mkdir -p "${R_PACKAGE_DIR}/libs"
if [[ "$OSTYPE" == "darwin"* ]]; then
cp ./tools/bin/macos_universal/* "${R_PACKAGE_DIR}/libs"
elif [[ "$OSTYPE" = "linux-gnu" && "$HOSTTYPE" == "x86_64" ]]; then
cp ./tools/bin/linux_x86_64/* "${R_PACKAGE_DIR}/libs"
else
echo "OS not supported."
fi

# remove TofDaqDll functions from RcppExports.cpp
sed -i.windows '/ FindTpsIp(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_FindTpsIp"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SiProcessSpectrumFromShMem(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SiProcessSpectrumFromShMem"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ KeepSharedMemMapped(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_KeepSharedMemMapped"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ AddAttributeDouble(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_AddAttributeDouble"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ AddAttributeInt(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_AddAttributeInt"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ AddAttributeString(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_AddAttributeString"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ AddLogEntry(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_AddLogEntry"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ AddUserData(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_AddUserData"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ AddUserDataMultiRow(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_AddUserDataMultiRow"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ AutoSetupDaqDevice(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_AutoSetupDaqDevice"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ CleanupDll(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_CleanupDll"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ CloseTofDaqRec(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_CloseTofDaqRec"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ IssueDio4Pulse(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_IssueDio4Pulse"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetDio4State(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetDio4State"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ DaqActive(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_DaqActive"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetBufTimeFromShMem(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetBufTimeFromShMem"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameter(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameter"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterBool(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterBool"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterBoolRef(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterBoolRef"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterDouble(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterDouble"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterDoubleRef(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterDoubleRef"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterFloat(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterFloat"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterFloatRef(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterFloatRef"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterInt(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterInt"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterInt64(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterInt64"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterInt64Ref(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterInt64Ref"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterIntRef(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterIntRef"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDaqParameterStringRef(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDaqParameterStringRef"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDescriptor(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDescriptor"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetDllVersion(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetDllVersion"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetPeakParameters(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetPeakParameters"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetRegUserDataDesc(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetRegUserDataDesc"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetRegUserDataSources(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetRegUserDataSources"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetSegmentProfileFromShMem(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetSegmentProfileFromShMem"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetSegmentProfileFromShMem2(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetSegmentProfileFromShMem2"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetSpecXaxisFromShMem(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetSpecXaxisFromShMem"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetStickSpectrumFromShMem(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetStickSpectrumFromShMem"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetStickSpectrumFromShMem2(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetStickSpectrumFromShMem2"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetSumSpectrumFromShMem(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetSumSpectrumFromShMem"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetSumSpectrumFromShMem2(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetSumSpectrumFromShMem2"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetTimeout(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetTimeout"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetTofSpectrumFromShMem(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetTofSpectrumFromShMem"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetTofSpectrumFromShMem2(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetTofSpectrumFromShMem2"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ InitializeDaqDevice(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_InitializeDaqDevice"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ InitializeDll(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_InitializeDll"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ KeepFileOpen(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_KeepFileOpen"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ LoadIniFile(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_LoadIniFile"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ OnDemandMassCalibration(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_OnDemandMassCalibration"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ QueryRegUserDataSize(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_QueryRegUserDataSize"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ ReadRegUserData(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_ReadRegUserData"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ RegisterUserDataBuf(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_RegisterUserDataBuf"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ RegisterUserDataNoStore(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_RegisterUserDataNoStore"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ RegisterUserDataWrite(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_RegisterUserDataWrite"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ ReleaseSharedMemory(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_ReleaseSharedMemory"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SaveIniFile(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SaveIniFile"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetDaqParameter(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetDaqParameter"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetDaqParameterBool(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetDaqParameterBool"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetDaqParameterDouble(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetDaqParameterDouble"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetDaqParameterFloat(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetDaqParameterFloat"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetDaqParameterInt(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetDaqParameterInt"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetDaqParameterInt64(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetDaqParameterInt64"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ ConfigVarNbrMemories(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_ConfigVarNbrMemories"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetTimeout(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetTimeout"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ ShowConfigWindow(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_ShowConfigWindow"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ StartAcquisition(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_StartAcquisition"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ StopAcquisition(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_StopAcquisition"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ ContinueAcquisition(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_ContinueAcquisition"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ ManualContinueNeeded(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_ManualContinueNeeded"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TofDaqRunning(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TofDaqRunning"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsChangeIonMode(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsChangeIonMode"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsConnect(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsConnect"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsConnect2(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsConnect2"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsDisconnect(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsDisconnect"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetActiveFilament(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetActiveFilament"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetLastSetValue(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetLastSetValue"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetModuleCodes(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetModuleCodes"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetModuleLimits(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetModuleLimits"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetMonitorValue(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetMonitorValue"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetNbrModules(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetNbrModules"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetStatus(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetStatus"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsGetTargetValue(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsGetTargetValue"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsInitialize(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsInitialize"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsLoadSetFile(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsLoadSetFile"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsSaveSetFile(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsSaveSetFile"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsSetActiveFilament(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsSetActiveFilament"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsSetAllVoltages(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsSetAllVoltages"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsSetTargetValue(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsSetTargetValue"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ TpsShutdown(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_TpsShutdown"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ UnregisterUserData(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_UnregisterUserData"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ UpdateUserData(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_UpdateUserData"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ WaitForEndOfAcquisition(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_WaitForEndOfAcquisition"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ WaitForNewData(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_WaitForNewData"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetMassCalib(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetMassCalib"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetMassCalib2(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetMassCalib2"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetMassCalibEx(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetMassCalibEx"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ GetMassCalib2Ex(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_GetMassCalib2Ex"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetMassCalib(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetMassCalib"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetMassCalib2(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetMassCalib2"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetMassCalibEx(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetMassCalibEx"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ SetMassCalib2Ex(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_SetMassCalib2Ex"/ d' ./src/RcppExports.cpp

sed -i.tmp '/ DeleteAttributeInH5(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_DeleteAttributeInH5"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ WaitForExclusiveFileAccess(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_WaitForExclusiveFileAccess"/ d' ./src/RcppExports.cpp
sed -i.tmp '/ WriteNetCdfTimeSeriesFile(/,/}/ d' ./src/RcppExports.cpp
sed -i.tmp '/_WriteNetCdfTimeSeriesFile"/ d' ./src/RcppExports.cpp

# remove TofDaqDll help files from ./man
mv ./man/AddAttributeDouble.Rd ./tools
mv ./man/AddAttributeInt.Rd ./tools
mv ./man/AddAttributeString.Rd ./tools
mv ./man/AddLogEntry.Rd ./tools
mv ./man/AddUserData.Rd ./tools
mv ./man/AddUserDataMultiRow.Rd ./tools
mv ./man/AutoSetupDaqDevice.Rd ./tools
mv ./man/CleanupDll.Rd ./tools
mv ./man/CloseTofDaqRec.Rd ./tools
mv ./man/IssueDio4Pulse.Rd ./tools
mv ./man/SetDio4State.Rd ./tools
mv ./man/DaqActive.Rd ./tools
mv ./man/FindTpsIp.Rd ./tools
mv ./man/GetBufTimeFromShMem.Rd ./tools
mv ./man/GetDaqParameter.Rd ./tools
mv ./man/GetDaqParameterBool.Rd ./tools
mv ./man/GetDaqParameterBoolRef.Rd ./tools
mv ./man/GetDaqParameterDouble.Rd ./tools
mv ./man/GetDaqParameterDoubleRef.Rd ./tools
mv ./man/GetDaqParameterFloat.Rd ./tools
mv ./man/GetDaqParameterFloatRef.Rd ./tools
mv ./man/GetDaqParameterInt.Rd ./tools
mv ./man/GetDaqParameterInt64.Rd ./tools
mv ./man/GetDaqParameterInt64Ref.Rd ./tools
mv ./man/GetDaqParameterIntRef.Rd ./tools
mv ./man/GetDaqParameterStringRef.Rd ./tools
mv ./man/GetDescriptor.Rd ./tools
mv ./man/GetDllVersion.Rd ./tools
mv ./man/GetPeakParameters.Rd ./tools
mv ./man/GetRegUserDataDesc.Rd ./tools
mv ./man/GetRegUserDataSources.Rd ./tools
mv ./man/GetSegmentProfileFromShMem.Rd ./tools
mv ./man/GetSegmentProfileFromShMem2.Rd ./tools
mv ./man/GetSpecXaxisFromShMem.Rd ./tools
mv ./man/GetStickSpectrumFromShMem.Rd ./tools
mv ./man/GetStickSpectrumFromShMem2.Rd ./tools
mv ./man/GetSumSpectrumFromShMem.Rd ./tools
mv ./man/GetSumSpectrumFromShMem2.Rd ./tools
mv ./man/GetTimeout.Rd ./tools
mv ./man/GetTofSpectrumFromShMem.Rd ./tools
mv ./man/GetTofSpectrumFromShMem2.Rd ./tools
mv ./man/InitializeDaqDevice.Rd ./tools
mv ./man/InitializeDll.Rd ./tools
mv ./man/KeepFileOpen.Rd ./tools
mv ./man/KeepSharedMemMapped.Rd ./tools
mv ./man/LoadIniFile.Rd ./tools
mv ./man/OnDemandMassCalibration.Rd ./tools
mv ./man/QueryRegUserDataSize.Rd ./tools
mv ./man/ReadRegUserData.Rd ./tools
mv ./man/RegisterUserDataBuf.Rd ./tools
mv ./man/RegisterUserDataNoStore.Rd ./tools
mv ./man/RegisterUserDataWrite.Rd ./tools
mv ./man/ReleaseSharedMemory.Rd ./tools
mv ./man/SaveIniFile.Rd ./tools
mv ./man/SetDaqParameter.Rd ./tools
mv ./man/SetDaqParameterBool.Rd ./tools
mv ./man/SetDaqParameterDouble.Rd ./tools
mv ./man/SetDaqParameterFloat.Rd ./tools
mv ./man/SetDaqParameterInt.Rd ./tools
mv ./man/SetDaqParameterInt64.Rd ./tools
mv ./man/ConfigVarNbrMemories.Rd ./tools
mv ./man/SetTimeout.Rd ./tools
mv ./man/ShowConfigWindow.Rd ./tools
mv ./man/SiProcessSpectrumFromShMem.Rd ./tools
mv ./man/StartAcquisition.Rd ./tools
mv ./man/StopAcquisition.Rd ./tools
mv ./man/ContinueAcquisition.Rd ./tools
mv ./man/ManualContinueNeeded.Rd ./tools
mv ./man/TofDaqRunning.Rd ./tools
mv ./man/TpsChangeIonMode.Rd ./tools
mv ./man/TpsConnect.Rd ./tools
mv ./man/TpsConnect2.Rd ./tools
mv ./man/TpsDisconnect.Rd ./tools
mv ./man/TpsGetActiveFilament.Rd ./tools
mv ./man/TpsGetLastSetValue.Rd ./tools
mv ./man/TpsGetModuleCodes.Rd ./tools
mv ./man/TpsGetModuleLimits.Rd ./tools
mv ./man/TpsGetMonitorValue.Rd ./tools
mv ./man/TpsGetNbrModules.Rd ./tools
mv ./man/TpsGetStatus.Rd ./tools
mv ./man/TpsGetTargetValue.Rd ./tools
mv ./man/TpsInitialize.Rd ./tools
mv ./man/TpsLoadSetFile.Rd ./tools
mv ./man/TpsSaveSetFile.Rd ./tools
mv ./man/TpsSetActiveFilament.Rd ./tools
mv ./man/TpsSetAllVoltages.Rd ./tools
mv ./man/TpsSetTargetValue.Rd ./tools
mv ./man/TpsShutdown.Rd ./tools
mv ./man/UnregisterUserData.Rd ./tools
mv ./man/UpdateUserData.Rd ./tools
mv ./man/WaitForEndOfAcquisition.Rd ./tools
mv ./man/WaitForNewData.Rd ./tools
mv ./man/GetMassCalib.Rd ./tools
mv ./man/GetMassCalib2.Rd ./tools
mv ./man/GetMassCalibEx.Rd ./tools
mv ./man/GetMassCalib2Ex.Rd ./tools
mv ./man/SetMassCalib.Rd ./tools
mv ./man/SetMassCalib2.Rd ./tools
mv ./man/SetMassCalibEx.Rd ./tools
mv ./man/SetMassCalib2Ex.Rd ./tools
mv ./man/DeleteAttributeInH5.Rd ./tools
mv ./man/WaitForExclusiveFileAccess.Rd ./tools
mv ./man/WriteNetCdfTimeSeriesFile.Rd ./tools

# remove TofDaqDll functions from NAMESPACE
sed -i.windows '/(AddAttributeDouble)/ d' NAMESPACE
sed -i.tmp '/(AddAttributeInt)/ d' NAMESPACE
sed -i.tmp '/(AddAttributeString)/ d' NAMESPACE
sed -i.tmp '/(AddLogEntry)/ d' NAMESPACE
sed -i.tmp '/(AddUserData)/ d' NAMESPACE
sed -i.tmp '/(AddUserDataMultiRow)/ d' NAMESPACE
sed -i.tmp '/(AutoSetupDaqDevice)/ d' NAMESPACE
sed -i.tmp '/(CleanupDll)/ d' NAMESPACE
sed -i.tmp '/(CloseTofDaqRec)/ d' NAMESPACE
sed -i.tmp '/(IssueDio4Pulse)/ d' NAMESPACE
sed -i.tmp '/(SetDio4State)/ d' NAMESPACE
sed -i.tmp '/(DaqActive)/ d' NAMESPACE
sed -i.tmp '/(FindTpsIp)/ d' NAMESPACE
sed -i.tmp '/(GetBufTimeFromShMem)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameter)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterBool)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterBoolRef)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterDouble)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterDoubleRef)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterFloat)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterFloatRef)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterInt)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterInt64)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterInt64Ref)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterIntRef)/ d' NAMESPACE
sed -i.tmp '/(GetDaqParameterStringRef)/ d' NAMESPACE
sed -i.tmp '/(GetDescriptor)/ d' NAMESPACE
sed -i.tmp '/(GetDllVersion)/ d' NAMESPACE
sed -i.tmp '/(GetPeakParameters)/ d' NAMESPACE
sed -i.tmp '/(GetRegUserDataDesc)/ d' NAMESPACE
sed -i.tmp '/(GetRegUserDataSources)/ d' NAMESPACE
sed -i.tmp '/(GetSegmentProfileFromShMem)/ d' NAMESPACE
sed -i.tmp '/(GetSegmentProfileFromShMem2)/ d' NAMESPACE
sed -i.tmp '/(GetSpecXaxisFromShMem)/ d' NAMESPACE
sed -i.tmp '/(GetStickSpectrumFromShMem)/ d' NAMESPACE
sed -i.tmp '/(GetStickSpectrumFromShMem2)/ d' NAMESPACE
sed -i.tmp '/(GetSumSpectrumFromShMem)/ d' NAMESPACE
sed -i.tmp '/(GetSumSpectrumFromShMem2)/ d' NAMESPACE
sed -i.tmp '/(GetTimeout)/ d' NAMESPACE
sed -i.tmp '/(GetTofSpectrumFromShMem)/ d' NAMESPACE
sed -i.tmp '/(GetTofSpectrumFromShMem2)/ d' NAMESPACE
sed -i.tmp '/(InitializeDaqDevice)/ d' NAMESPACE
sed -i.tmp '/(InitializeDll)/ d' NAMESPACE
sed -i.tmp '/(KeepFileOpen)/ d' NAMESPACE
sed -i.tmp '/(KeepSharedMemMapped)/ d' NAMESPACE
sed -i.tmp '/(LoadIniFile)/ d' NAMESPACE
sed -i.tmp '/(OnDemandMassCalibration)/ d' NAMESPACE
sed -i.tmp '/(QueryRegUserDataSize)/ d' NAMESPACE
sed -i.tmp '/(ReadRegUserData)/ d' NAMESPACE
sed -i.tmp '/(RegisterUserDataBuf)/ d' NAMESPACE
sed -i.tmp '/(RegisterUserDataNoStore)/ d' NAMESPACE
sed -i.tmp '/(RegisterUserDataWrite)/ d' NAMESPACE
sed -i.tmp '/(ReleaseSharedMemory)/ d' NAMESPACE
sed -i.tmp '/(SaveIniFile)/ d' NAMESPACE
sed -i.tmp '/(SetDaqParameter)/ d' NAMESPACE
sed -i.tmp '/(SetDaqParameterBool)/ d' NAMESPACE
sed -i.tmp '/(SetDaqParameterDouble)/ d' NAMESPACE
sed -i.tmp '/(SetDaqParameterFloat)/ d' NAMESPACE
sed -i.tmp '/(SetDaqParameterInt)/ d' NAMESPACE
sed -i.tmp '/(SetDaqParameterInt64)/ d' NAMESPACE
sed -i.tmp '/(ConfigVarNbrMemories)/ d' NAMESPACE
sed -i.tmp '/(SetTimeout)/ d' NAMESPACE
sed -i.tmp '/(ShowConfigWindow)/ d' NAMESPACE
sed -i.tmp '/(SiProcessSpectrumFromShMem)/ d' NAMESPACE
sed -i.tmp '/(StartAcquisition)/ d' NAMESPACE
sed -i.tmp '/(StopAcquisition)/ d' NAMESPACE
sed -i.tmp '/(ContinueAcquisition)/ d' NAMESPACE
sed -i.tmp '/(ManualContinueNeeded)/ d' NAMESPACE
sed -i.tmp '/(TofDaqRunning)/ d' NAMESPACE
sed -i.tmp '/(TpsChangeIonMode)/ d' NAMESPACE
sed -i.tmp '/(TpsConnect)/ d' NAMESPACE
sed -i.tmp '/(TpsConnect2)/ d' NAMESPACE
sed -i.tmp '/(TpsDisconnect)/ d' NAMESPACE
sed -i.tmp '/(TpsGetActiveFilament)/ d' NAMESPACE
sed -i.tmp '/(TpsGetLastSetValue)/ d' NAMESPACE
sed -i.tmp '/(TpsGetModuleCodes)/ d' NAMESPACE
sed -i.tmp '/(TpsGetModuleLimits)/ d' NAMESPACE
sed -i.tmp '/(TpsGetMonitorValue)/ d' NAMESPACE
sed -i.tmp '/(TpsGetNbrModules)/ d' NAMESPACE
sed -i.tmp '/(TpsGetStatus)/ d' NAMESPACE
sed -i.tmp '/(TpsGetTargetValue)/ d' NAMESPACE
sed -i.tmp '/(TpsInitialize)/ d' NAMESPACE
sed -i.tmp '/(TpsLoadSetFile)/ d' NAMESPACE
sed -i.tmp '/(TpsSaveSetFile)/ d' NAMESPACE
sed -i.tmp '/(TpsSetActiveFilament)/ d' NAMESPACE
sed -i.tmp '/(TpsSetAllVoltages)/ d' NAMESPACE
sed -i.tmp '/(TpsSetTargetValue)/ d' NAMESPACE
sed -i.tmp '/(TpsShutdown)/ d' NAMESPACE
sed -i.tmp '/(UnregisterUserData)/ d' NAMESPACE
sed -i.tmp '/(UpdateUserData)/ d' NAMESPACE
sed -i.tmp '/(WaitForEndOfAcquisition)/ d' NAMESPACE
sed -i.tmp '/(WaitForNewData)/ d' NAMESPACE
sed -i.tmp '/(GetMassCalib)/ d' NAMESPACE
sed -i.tmp '/(GetMassCalib2)/ d' NAMESPACE
sed -i.tmp '/(GetMassCalibEx)/ d' NAMESPACE
sed -i.tmp '/(GetMassCalib2Ex)/ d' NAMESPACE
sed -i.tmp '/(SetMassCalib)/ d' NAMESPACE
sed -i.tmp '/(SetMassCalib2)/ d' NAMESPACE
sed -i.tmp '/(SetMassCalibEx)/ d' NAMESPACE
sed -i.tmp '/(SetMassCalib2Ex)/ d' NAMESPACE

sed -i.tmp '/(DeleteAttributeInH5)/ d' NAMESPACE
sed -i.tmp '/(WaitForExclusiveFileAccess)/ d' NAMESPACE
sed -i.tmp '/(WriteNetCdfTimeSeriesFile)/ d' NAMESPACE

# remove CleanupDll() from zzz.R
sed -i.windows '/CleanupDll(/ d' ./R/zzz.R
